//   ▄▄▄        ▄▄████▄
// ▄█████▄    ▄██▀    ██
// ▀█▄   ██▄ ██▀      ██
//  ▀██▄▄▄████   ▄▄▄██▀
//     ▀▀▀████▀▀▀▀▀
//        ██
//       ██          ▄█████▄       █████████████          ▄█             █▄
//      ██         ▄█▀     ▀█▄     ██         ██         ██▀█▄         ▄█▀
//      ██        ██         ██    ██         ██        ██  ▀██       ██▀
//      ██        ██         ██    ██         ██      ▄█▀     ██     ▀▀▀▀▀▀▀███
//      ██        ▀█▄       ▄█▀    ██         ██     ██▀       ▀█▄         ██▀
//       ██         ▀███████▀      █████████████    ███▄▄▄▄▄▄▄▄▄██▓       █▀
//
//@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
//@@@@@@@@@@@@@@@@@@@@@@@@@@@@   C H A T R O O M   @@@@@@@@@@@@@@@@@@@@@@@@@@@@
//@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@

//**************************************
//************   M A I N   *************
//**************************************

.ts.chatroom
  +basic-card

  max-width: 280px



  // [&] Minimized
  //
  // 已經縮小的。

  &.minimized
    border-bottom-width: 0

    > .notification,
    > .content,
    > .footer
      +none



  // [&] Fluid
  //
  // 流動寬度的聊天室。

  &.fluid
    max-width: 100%
    width: 100%



  // > Header
  //
  // 聊天室的標題列。

  > .header
    +flex
    +rd

    border-bottom-left-radius: 0
    border-bottom-right-radius: 0
    background-color: #00ADEA
    color: #FFF
    font-size: 1.4rem



    // > Title
    //
    // 標題列中的標題區塊。

    > .title
      +flex
      +flex-row
      +flex-items-center
      +x-padding(.8em)
      +y-padding($padding / 2)
      +no-overflow

      flex: 1
      text-overflow: ellipsis



      // > Label
      //
      // 標題列中的標籤元素。

      > .label
        +x-margin(x, .8em)



    // > Actions
    //
    // 標題列中的動作區塊。

    > .actions
      +flex
      +flex-row
      //font-size: 1.8rem



      // > Item
      //
      // 標題列中動作區塊的項目。

      > .item
        +flex
        +flex-items-center
        +x-padding(.7em)
        +y-padding($padding / 2)

        .icon, .fa
          margin-right: 0

        &:hover
          +poi
          +extend(ease)
          background-color: darken(#00ADEA, 5%)

        &:active
          +extend(no-ease)
          background-color: darken(#00ADEA, 15%)
          color: darken(#FFF, 5%)



  // > Notification
  //
  // 聊天室中的通知區塊。

  > .notification
    +x-padding(.8em)
    +y-padding($padding / 2)

    font-size: 1.2rem
    background: lighten(#EEE, 5%)
    border-bottom: 1px solid darken(lighten(#EEE, 5%), 5%)



  // > Content
  //
  // 聊天室中的內容區塊。

  > .content
    +padding

    overflow-y: scroll



    // > Divider
    //
    // 內容區塊的分隔線。

    > .divider
      +table
      +y-margin(x, .8em)
      +no-wrap
      +no-overflow

      text-align: center
      font-weight: 600
      font-size: 1.3rem

      height: auto
      line-height: 1



      // [&] BEFORE, [&] AFTER
      //
      //

      &:before, &:after
        +relative
        +table-cell
        +position(50%, x, x, x)

        content: ''
        width: 50%
        opacity: 0.4
        background-position: right 1em top 50%
        background-repeat  : no-repeat
        background-image   : url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABaAAAAACCAYAAACuTHuKAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo1OThBRDY4OUNDMTYxMUU0OUE3NUVGOEJDMzMzMjE2NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo1OThBRDY4QUNDMTYxMUU0OUE3NUVGOEJDMzMzMjE2NyI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjU5OEFENjg3Q0MxNjExRTQ5QTc1RUY4QkMzMzMyMTY3IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU5OEFENjg4Q0MxNjExRTQ5QTc1RUY4QkMzMzMyMTY3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+VU513gAAADVJREFUeNrs0DENACAQBDBIWLGBJQby/mUcJn5sJXQmOQMAAAAAAJqt+2prAAAAAACg2xdgANk6BEVuJgyMAAAAAElFTkSuQmCC)



      // [&] AFTER
      //
      //

      &:after
        background-position: left 1em top 50%



    // > Message
    //
    // 訊息區塊。

    > .message
      +flex
      +flex-row
      +y-margin(x, .4em)

      $messageParent: '.message'


      // > Avatar
      //
      // 訊息區塊中的頭像區塊。

      > .avatar

        // Img
        //
        //

        img
          +rd
          +size(32px)



      // > Content
      //
      // 訊息區塊中真正包含內容的區塊。

      > .content
        +x-margin(.8em, 0)

        // [PARENT] Right
        //
        // 由右邊的人說出來的話。

        +if-parent($messageParent, '.right')
          +x-margin(0, .8em)



        // > P
        //
        // 文字節點。

        > p
          +relative
          +basic-card
          +x-padding(.6em)
          +y-padding(.3em)
          +word-wrap

          font-size: 1.3rem
          line-height: 1.6rem



          // [PARENT] Right
          //
          // 由右邊的人說出來的話。

          +if-parent($messageParent, '.right')
            float: right



          // [&] AFTER
          //
          //

          &:after
            +block
            +absolute
            +position(5px, x, auto, -6px)

            width: 0
            content: ""
            border-width: 7px 7px 7px 0px
            border-color: transparent #fff
            border-style: solid

            // [PARENT] Right
            //
            // 由右邊的人說出來的話。

            +if-parent($messageParent, '.right')
              +position(5px, -6px, auto, auto)

              border-width: 7px 0px 7px 7px



          // [&] BEFORE
          //
          //

          &:before
            +block
            +absolute
            +position(4px, x, auto, -8px)

            width: 0
            content: ""
            border-width: 8px 8px 8px 0
            border-color: transparent lighten(#808080, 40%)
            border-style: solid



            // [PARENT] Right
            //
            // 由右邊的人說出來的話。

            +if-parent($messageParent, '.right')
              +position(4px, -8px, auto, auto)

              border-width: 8px 0px 8px 8px



        // > Meta
        //
        // 內容區塊中的中繼資料區塊。

        > .meta
          +x-margin(.6em, x)

          font-size: 12px
          opacity: .5
          text-align: left



          // [PARENT] Right
          //
          // 由右邊的人說出來的話。

          +if-parent($messageParent, '.right')
            +x-margin(x, .6em)

            text-align: right



      // [&] Right
      //
      // 由右邊的人說出來的話。

      &.right
        +flex-row-reverse



  // > Footer
  //
  // 聊天室的底部區塊。

  > .footer
    +padding
    +flex
    +flex-row

    border-top: 1px solid darken(lighten(#EEE, 5%), 5%)



    // > Input
    //
    // 輸入欄位區塊。

    > .input
      +flex
      +flex-row
      +flex-items-center

      flex: 1

      &:not(:only-child)
        +x-padding(x, $padding)



      // TS Input
      //
      // TocasUI 輸入欄位。

      .ts.input
        margin: 0

      &:not(:first-child)
        +x-padding($padding, $padding)



    // > Actions
    //
    // 動作區塊。

    > .actions
      +flex
      +flex-row
      +flex-items-center

      font-size: 2rem



      // > Item
      //
      // 動作區塊內的項目。

      > .item
        +rd
        +x-padding(.4em)
        +y-padding($padding / 2)

        *
          margin-right: 0



        // [&] HOVER
        //
        //

        &:hover
          +poi
          +extend(ease)

          background-color: darken(#FFF, 5%)



        // [&] ACTIVE
        //
        //

        &:active
          +extend(no-ease)

          background-color: darken(#FFF, 15%)