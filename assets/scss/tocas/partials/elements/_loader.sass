//   ▄▄▄        ▄▄████▄
// ▄█████▄    ▄██▀    ██
// ▀█▄   ██▄ ██▀      ██
//  ▀██▄▄▄████   ▄▄▄██▀
//     ▀▀▀████▀▀▀▀▀
//        ██
//       ██          ▄█████▄       █████████████          ▄█             █▄
//      ██         ▄█▀     ▀█▄     ██         ██         ██▀█▄         ▄█▀
//      ██        ██         ██    ██         ██        ██  ▀██       ██▀
//      ██        ██         ██    ██         ██      ▄█▀     ██     ▀▀▀▀▀▀▀███
//      ██        ▀█▄       ▄█▀    ██         ██     ██▀       ▀█▄         ██▀
//       ██         ▀███████▀      █████████████    ███▄▄▄▄▄▄▄▄▄██▓       █▀
//
//@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
//@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@   L O A D E R   @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
//@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@

//**************************************
//***********   T H E M E   ************
//**************************************

=loader-theme($size: 3.6rem, $borderSize: .3rem, $color: #999)

  &:before,
  &:after
    height: $size
    width : $size


  &:before
    border-width: $borderSize
    border-style: solid

  &:after
    border-top-width: $borderSize
    border-top-style: solid




//**************************************
//****   F L O W E R   T H E M E   *****
//**************************************

=loader-flower-theme($color: #FFF)
  background: auten($color)
  box-shadow: white 0 0 15px 0, $color -12px -12px 0 4px, $color 12px -12px 0 4px, $color 12px 12px 0 4px, $color -12px 12px 0 4px

  @keyframes flower-loader
    0%
      transform: rotate(0deg)
      box-shadow: white 0 0 15px 0, $color -12px -12px 0 4px, $color 12px -12px 0 4px, $color 12px 12px 0 4px, $color -12px 12px 0 4px
    50%
      transform: rotate(1080deg)
      box-shadow: white 0 0 15px 0, $color 12px 12px 0 4px, $color -12px 12px 0 4px, $color -12px -12px 0 4px, $color 12px -12px 0 4px




//**************************************
//********   R E S O U R C E   *********
//**************************************

=loader-resource


  &:before,
  &:after
    +border-box
    +absolute
    +position(0, 0, x, 0)
    +margin-center

    content: ' '
    border-radius: 50%

  &:before
    opacity: 0.5
    animation: spin 1s infinite linear


  &:after
    border-bottom: .5rem solid transparent
    border-left  : .5rem solid transparent
    border-right : .5rem solid transparent

    animation: spin 0.6s infinite linear

  &.indeterminate:after,
  &.indeterminate:before
    animation: spin2 1s infinite linear

    @keyframes spin2
      from
        transform: rotate(360deg)
      to
        transform: rotate(0deg)

    @keyframes spin
      from
        transform: rotate(0deg)
      to
        transform: rotate(360deg)




//**************************************
//***********   C O L O R   ************
//**************************************

=loader-color($color: #999)
  @if $color != false
    color: $color

  &:before
    @if $color != false
      border-color: $color

  &:after
    @if $color != false
      border-top-color: $color




//**************************************
//*******   G E N E R A T O R   ********
//**************************************

=loader-generator
  @for $i from 1 through $loaderAmount
    @at-root
      #{&}.#{nth($loaderSizes, $i)}

        $fontSize  : nth($loaderFontSizes, $i)
        $loaderSize: if($i < 4, $fontSize + $i / 5, $fontSize + $i / 2)
        $borderSize: if($i < 4, $i / 10 + rem, $i / 15 + rem)

        +loader-theme($loaderSize, $borderSize)

        font-size: $fontSize
        min-width: $loaderSize
        height   : $loaderSize



        // [&] Inline
        //
        // 同行的讀取指示器。

        &.inline

          // [&] Text
          //
          // 帶有文字的讀取指示器。

          &.text
            +y-padding($loaderSize + $padding * 1.5, x)
            +size($fontSize, x)

            // [&] EMPTY
            //
            // 當代有文字但卻是空的時候，重置高度。

            &:empty
              +y-padding(0, x)
              +size($loaderSize, x)



        // [&] NOT Inline
        //
        // 不是同行的讀取指示器。

        &:not(.inline)
          +position(calc(50% - #{$loaderSize} / 2), x, x, calc(50% - #{$loaderSize} / 2))

          // [&] Text
          //
          // 帶有文字的讀取指示器。

          &.text
            +position(calc(50% - (#{$loaderSize} + #{$fontSize} + #{$padding}) / 2), x, x, calc(50% - #{$loaderSize} / 2))

            height     : $fontSize
            max-width  : $loaderSize
            padding-top: $loaderSize + $padding




//**************************************
//************   M A I N   *************
//**************************************

.ts.loader
  +loader-theme(36px, 3px)
  +loader-color
  +loader-resource
  +loader-generator
  +absolute
  +block
  +size(36px, x)

  min-width : 36px
  text-align: center



  // [&] Inverted
  //
  // 相反色的讀取器。

  &.inverted
    +loader-color($invertedTextColor)



  // [&] NOT Active
  //
  // 沒有在啟用狀態的讀取器。

  &:not(.active)
    +none


  // [&] Inline
  //
  // 同行的讀取指示器。

  &.inline
    +relative
    +inline-block
    +position(0, x, x, 0)



  // [&] NOT Inline
  //
  // 不是同行的讀取指示器。

  &:not(.inline)
    +flex
    +flex-all-center

    white-space: nowrap



  // [&] Centered
  //
  // 水平置中的讀取指示器。

  &.centered
    +block

    margin: 0px auto


